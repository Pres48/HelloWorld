<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stuffed Animal Mixer</title>

<style>
    body {
        font-family: "Comic Sans MS", "Fredoka", sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(#dffcff, #c6f7e7);
        overflow-x: hidden;
    }

    h1 {
        text-align: center;
        padding: 20px 0;
        font-size: 42px;
        color: #1a8fb8;
        text-shadow: 2px 2px #ffffff;
        margin: 0;
    }

    /* Animated bubbles */
    .bubble {
        position: fixed;
        bottom: -100px;
        background: rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        animation: rise 12s infinite ease-in;
        pointer-events: none;
    }
    @keyframes rise {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(-140vh) scale(1.4); opacity: 0; }
    }

    /* Layout */
    #layout {
        display: flex;
        justify-content: center;
        gap: 30px;
        padding: 20px;
    }

    /* Tabs */
    #tabs button {
        display: block;
        width: 150px;
        padding: 12px;
        background: #69d4b3;
        border: none;
        border-radius: 12px;
        color: white;
        font-weight: bold;
        font-size: 17px;
        margin-bottom: 10px;
        cursor: pointer;
        box-shadow: 0 4px 0 #4aa88b;
        transition: transform 0.1s;
    }
    #tabs button:hover {
        transform: scale(1.07);
    }

    /* Carousel */
    .carousel {
        width: 240px;
        min-height: 320px;
        background: #ffffffcc;
        border-radius: 18px;
        padding: 15px;
        text-align: center;
        border: 4px dashed #86d8ff;
        box-shadow: 0 6px 15px #00000025;
    }

    .carousel img {
        width: 160px;
        height: 160px;
        background: white;
        border-radius: 14px;
        object-fit: contain;
        border: 4px solid #c5f2ff;
        box-shadow: 0 4px 12px #00000025;
        margin-bottom: 10px;
    }

    .carousel button {
        margin: 5px;
        background: #6cd4b4;
        padding: 10px 16px;
        border-radius: 12px;
        border: none;
        font-size: 15px;
        color: white;
        cursor: pointer;
        box-shadow: 0 3px 0 #4aa88b;
    }

    /* Preview */
    #preview-area {
        width: 340px;
        height: 480px;
        background: #ffffffcc;
        border: 5px solid #67e0c2;
        border-radius: 20px;
        position: relative;
        box-shadow: 0 8px 20px #00000030;
        overflow: hidden;
    }

    .part {
        position: absolute;
        width: 130px;
        left: 105px;
    }
    #preview-head { top: 5px; }
    #preview-body { top: 145px; }
    #preview-left-arm { top: 165px; left: 45px; }
    #preview-right-arm { top: 165px; left: 170px; }
    #preview-left-leg { top: 300px; left: 75px; }
    #preview-right-leg { top: 300px; left: 145px; }

    /* Buttons below preview */
    #action-buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
        padding-top: 15px;
    }

    #action-buttons button {
        background: #5cc2ff;
        padding: 12px 18px;
        border: none;
        border-radius: 14px;
        color: white;
        font-weight: bold;
        font-size: 17px;
        box-shadow: 0 4px 0 #3398d6;
        cursor: pointer;
    }
</style>
</head>
<body>

<h1>Stuffed Animal Mixer</h1>

<!-- Animated bubbles -->
<script>
for (let i = 0; i < 20; i++) {
    let b = document.createElement("div");
    b.classList.add("bubble");
    let size = Math.random() * 70 + 20;
    b.style.width = size + "px";
    b.style.height = size + "px";
    b.style.left = Math.random() * 100 + "vw";
    b.style.animationDuration = (10 + Math.random() * 10) + "s";
    document.body.appendChild(b);
}
</script>

<div id="layout">

    <!-- Tabs -->
    <div id="tabs">
        <button onclick="showTab('head')">Head</button>
        <button onclick="showTab('body')">Body</button>
        <button onclick="showTab('leftArm')">Left Arm</button>
        <button onclick="showTab('rightArm')">Right Arm</button>
        <button onclick="showTab('leftLeg')">Left Leg</button>
        <button onclick="showTab('rightLeg')">Right Leg</button>
    </div>

    <!-- Carousel area -->
    <div id="carousel-area">
        <div class="carousel" id="carousel-head">
            <h3>Head</h3>
            <img id="head-img">
            <button onclick="prev('head')">Prev</button>
            <button onclick="next('head')">Next</button>
        </div>

        <div class="carousel" id="carousel-body" style="display:none;">
            <h3>Body</h3>
            <img id="body-img">
            <button onclick="prev('body')">Prev</button>
            <button onclick="next('body')">Next</button>
        </div>

        <div class="carousel" id="carousel-leftArm" style="display:none;">
            <h3>Left Arm</h3>
            <img id="leftArm-img">
            <button onclick="prev('leftArm')">Prev</button>
            <button onclick="next('leftArm')">Next</button>
        </div>

        <div class="carousel" id="carousel-rightArm" style="display:none;">
            <h3>Right Arm</h3>
            <img id="rightArm-img">
            <button onclick="prev('rightArm')">Prev</button>
            <button onclick="next('rightArm')">Next</button>
        </div>

        <div class="carousel" id="carousel-leftLeg" style="display:none;">
            <h3>Left Leg</h3>
            <img id="leftLeg-img">
            <button onclick="prev('leftLeg')">Prev</button>
            <button onclick="next('leftLeg')">Next</button>
        </div>

        <div class="carousel" id="carousel-rightLeg" style="display:none;">
            <h3>Right Leg</h3>
            <img id="rightLeg-img">
            <button onclick="prev('rightLeg')">Prev</button>
            <button onclick="next('rightLeg')">Next</button>
        </div>
    </div>

    <!-- Preview -->
    <div>
        <div id="preview-area">
            <img id="preview-head" class="part">
            <img id="preview-body" class="part">
            <img id="preview-left-arm" class="part">
            <img id="preview-right-arm" class="part">
            <img id="preview-left-leg" class="part">
            <img id="preview-right-leg" class="part">
        </div>

        <div id="action-buttons">
            <button onclick="randomizeAll()">Randomize All</button>
            <button onclick="downloadCreature()">Download My Creature</button>
        </div>
    </div>

</div>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<script>
/* Only 1 animal so far */
const files = {
    head: ["img/heads/bear.png"],
    body: ["img/bodies/bear.png"],
    leftArm: ["img/arms/left-bear.png"],
    rightArm: ["img/arms/right-bear.png"],
    leftLeg: ["img/legs/left-bear.png"],
    rightLeg: ["img/legs/right-bear.png"]
};

const index = {
    head: 0,
    body: 0,
    leftArm: 0,
    rightArm: 0,
    leftLeg: 0,
    rightLeg: 0
};

/* Cute sound effects */
const sounds = [
    "https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg",
    "https://actions.google.com/sounds/v1/cartoon/pop.ogg",
    "https://actions.google.com/sounds/v1/cartoon/concussive_hit_guitar_boing.ogg"
];

function playSound() {
    const audio = new Audio(sounds[Math.floor(Math.random() * sounds.length)]);
    audio.volume = 0.4;
    audio.play();
}

function update(part) {
    const img = document.getElementById(part + "-img");
    const view = document.getElementById("preview-" +
        part.replace(/([A-Z])/g, "-$1").toLowerCase());
    const list = files[part];

    img.src = list[index[part]];
    view.src = list[index[part]];
}

function next(part) {
    playSound();
    index[part] = (index[part] + 1) % files[part].length;
    update(part);
}

function prev(part) {
    playSound();
    index[part] = (index[part] - 1 + files[part].length) % files[part].length;
    update(part);
}

function showTab(part) {
    document.querySelectorAll(".carousel").forEach(c => c.style.display = "none");
    document.getElementById("carousel-" + part).style.display = "block";
}

function randomizeAll() {
    playSound();
    Object.keys(files).forEach(part => {
        index[part] = Math.floor(Math.random() * files[part].length);
        update(part);
    });
}

/* Download preview */
function downloadCreature() {
    html2canvas(document.getElementById("preview-area")).then(canvas => {
        const link = document.createElement("a");
        link.download = "my-creature.png";
        link.href = canvas.toDataURL();
        link.click();
    });
}

/* Initialize */
Object.keys(files).forEach(update);
showTab("head");
</script>

</body>
</html>
