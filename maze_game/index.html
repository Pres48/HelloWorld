<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Mini Maze Game</title>

<style>
  body {
    background: #222;
    display: flex;
    justify-content: center;
    margin-top: 20px;
  }

  canvas {
    background: #ffffff;
    border: 4px solid black;
  }
</style>
</head>

<body>

<canvas id="maze" width="500" height="500"></canvas>

<script>
// ----- Canvas Setup -----
const canvas = document.getElementById("maze");
const ctx = canvas.getContext("2d");

// Player square
let player = {
  x: 40,
  y: 450,
  size: 20,
  speed: 3
};

// Maze walls (x, y, width, height)
const walls = [
  {x: 0, y: 400, w: 350, h: 20},
  {x: 350, y: 200, w: 20, h: 220},
  {x: 150, y: 100, w: 220, h: 20},
  {x: 150, y: 100, w: 20, h: 320},
  {x: 0, y: 0, w: 150, h: 20},
  {x: 130, y: 0, w: 20, h: 100}
];

// Start line
const startLine = { x: 0, y: 470, w: 200, h: 20 };

// Finish line
const finishLine = { x: 400, y: 0, w: 100, h: 20 };

// ----- Drawing the Maze -----
function drawMaze() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw walls
  ctx.fillStyle = "black";
  walls.forEach(w => ctx.fillRect(w.x, w.y, w.w, w.h));

  // Draw Start Line
  ctx.fillStyle = "green";
  ctx.fillRect(startLine.x, startLine.y, startLine.w, startLine.h);
  ctx.font = "20px Arial";
  ctx.fillText("START", startLine.x + 10, startLine.y - 5);

  // Draw Finish Line
  ctx.fillStyle = "red";
  ctx.fillRect(finishLine.x, finishLine.y, finishLine.w, finishLine.h);
  ctx.fillText("FINISH", finishLine.x + 10, finishLine.y + 35);

  // Draw Player
  ctx.fillStyle = "blue";
  ctx.fillRect(player.x, player.y, player.size, player.size);
}

// ----- Collision Check -----
function rectCollision(a, b) {
  return (
    a.x < b.x + b.w &&
    a.x + a.size > b.x &&
    a.y < b.y + b.h &&
    a.y + a.size > b.y
  );
}

// ----- Movement -----
let keys = {};

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function movePlayer() {
  let oldX = player.x;
  let oldY = player.y;

  if (keys["ArrowUp"]) player.y -= player.speed;
  if (keys["ArrowDown"]) player.y += player.speed;
  if (keys["ArrowLeft"]) player.x -= player.speed;
  if (keys["ArrowRight"]) player.x += player.speed;

  // Collision check with walls
  for (let w of walls) {
    if (rectCollision(player, w)) {
      player.x = oldX;
      player.y = oldY;
      break;
    }
  }

  // Check Finish Line
  if (rectCollision(player, finishLine)) {
    setTimeout(() => {
      alert("ðŸŽ‰ YOU WIN! ðŸŽ‰");
    }, 50);
  }
}

// ----- Game Loop -----
function gameLoop() {
  movePlayer();
  drawMaze();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
