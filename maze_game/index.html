<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Maze Game</title>

<style>
  body {
    background: #ddd;
    display: flex;
    justify-content: center;
    margin-top: 20px;
    font-family: Arial, sans-serif;
  }

  canvas {
    background: white;
    border: 4px solid black;
  }

  #status {
    font-size: 24px;
    font-weight: bold;
    margin-top: 20px;
    text-align: center;
  }
</style>
</head>
<body>

<canvas id="maze" width="600" height="600"></canvas>

<script>
const canvas = document.getElementById("maze");
const ctx = canvas.getContext("2d");

const player = { x: 40, y: 40, size: 14 };

const walls = [];

// QUICK WALL BUILDER
function W(x, y, w, h) { walls.push({x,y,w,h}); }

// **********************
//     BORDER WALLS
// **********************
W(0,0,600,10);
W(0,0,10,600);
W(590,0,10,600);
W(0,590,600,10);

// **********************
//     MAZE WALLS
// (Tight turns everywhere but one valid path)
// **********************

// Entrance corridor
W(10,80,200,10);
W(200,10,10,80);

// First fork area
W(100,80,10,150);
W(50,220,150,10);
W(50,120,10,100);

// Twisting mid-maze
W(150,120,10,200);
W(150,320,200,10);
W(350,120,10,200);
W(200,120,150,10);
W(200,200,150,10);
W(200,200,10,130);

// Snake path to bottom-left
W(80,350,250,10);
W(80,350,10,150);
W(80,490,300,10);
W(370,350,10,150);
W(250,350,10,140);

// Tight zigzags
W(420,150,10,300);
W(420,150,120,10);
W(480,150,10,240);
W(480,380,100,10);

// Final corridor to exit
W(350,500,10,90);
W(350,500,200,10);
W(540,400,10,200);
W(450,400,100,10);

// **********************
// START & FINISH LABELS
// **********************
function drawLabels() {
  ctx.fillStyle = "green";
  ctx.font = "20px Arial";
  ctx.fillText("START", 20, 30);

  ctx.fillStyle = "red";
  ctx.fillText("FINISH", 520, 570);
}

// FINISH ZONE
const finishZone = { x: 520, y: 540, w: 60, h: 60 };

function drawMaze() {
  ctx.clearRect(0,0,600,600);

  // Draw walls
  ctx.fillStyle = "black";
  for (let w of walls) {
    ctx.fillRect(w.x, w.y, w.w, w.h);
  }

  // Draw finish
  ctx.fillStyle = "red";
  ctx.fillRect(finishZone.x, finishZone.y, finishZone.w, finishZone.h);

  drawLabels();

  // Draw player
  ctx.fillStyle = "blue";
  ctx.fillRect(player.x, player.y, player.size, player.size);
}

function collides(nx, ny) {
  const p = {x:nx, y:ny, w:player.size, h:player.size};
  for (let w of walls) {
    if (p.x < w.x + w.w &&
        p.x + p.w > w.x &&
        p.y < w.y + w.h &&
        p.y + p.h > w.y) {
      return true;
    }
  }
  return false;
}

document.addEventListener("keydown", e => {
  let nx = player.x;
  let ny = player.y;

  if (e.key === "ArrowUp") ny -= 5;
  if (e.key === "ArrowDown") ny += 5;
  if (e.key === "ArrowLeft") nx -= 5;
  if (e.key === "ArrowRight") nx += 5;

  if (!collides(nx, ny)) {
    player.x = nx;
    player.y = ny;
  }

  // Check finish
  if (player.x > finishZone.x &&
      player.y > finishZone.y) {
    alert("ðŸŽ‰ YOU WIN!");
    player.x = 40;
    player.y = 40;
  }

  drawMaze();
});

drawMaze();
</script>

</body>
</html>
